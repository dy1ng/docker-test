<?xml version="1.0" encoding="UTF-8"?>
<build-type xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" uuid="1ac0bb55-2356-4330-a50c-2c8aa054673c" xsi:noNamespaceSchemaLocation="https://www.jetbrains.com/teamcity/schemas/2021.1/project-config.xsd">
  <name>Bash Source test</name>
  <description />
  <settings>
    <parameters>
      <param name="env.TEST_PARAM" value="DEFAULT" />
    </parameters>
    <build-runners>
      <runner id="RUNNER_8" name="create sh. script" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[cat > source_test.sh << EOM
echo "setting env.TEST_PARAM via service messages"
echo "##teamcity[setParameter name='env.TEST_PARAM' value='SUCCESS']"
EOM]]></param>
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_9" name="source the script" type="simpleRunner">
        <parameters>
          <param name="script.content" value="source source_test.sh" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner id="RUNNER_10" name="check parameters" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[echo "This is the value of TC parameter: %env.TEST_PARAM%"
echo "This is the value of the corresponding environmental variable: $TEST_PARAM"]]></param>
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
    </build-runners>
    <vcs-settings />
    <requirements />
    <build-triggers />
    <cleanup />
  </settings>
</build-type>

